/**
 * @package    mod_jazzquiz
 * @author     Sebastian S. Gundersen <sebastsg@stud.ntnu.no>
 * @copyright  2015 University of Wisconsin - Madison
 * @copyright  2018 NTNU
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_jazzquiz/edit",["jquery"],(function($){function submitQuestionOrder(order,courseModuleId){$.post("edit.php",{id:courseModuleId,action:"order",order:JSON.stringify(order)},(()=>location.reload()))}function getQuestionOrder(){let order=[];return $(".questionlist li").each((function(){order.push($(this).data("question-id"))})),order}function offsetQuestion(questionId,offset){let order=getQuestionOrder(),originalIndex=order.indexOf(questionId);if(-1===originalIndex)return order;for(let i=0;i<order.length;i++)if(i+offset===originalIndex){order[originalIndex]=order[i],order[i]=questionId;break}return order}return{initialize:courseModuleId=>{$(".edit-question-action").on("click",(function(){const action=$(this).data("action"),questionId=$(this).data("question-id");let order=[];switch(action){case"up":order=offsetQuestion(questionId,1);break;case"down":order=offsetQuestion(questionId,-1);break;case"delete":order=getQuestionOrder();const index=order.indexOf(questionId);-1!==index&&order.splice(index,1);break;default:return}submitQuestionOrder(order,courseModuleId)}));let questionList=document.getElementsByClassName("questionlist")[0];Sortable.create(questionList,{handle:".dragquestion",onSort:()=>submitQuestionOrder(getQuestionOrder(),courseModuleId)}),function(courseModuleId){$(".jazzquiz-add-selected-questions").on("click",(function(){const $checkboxes=$("#categoryquestions td input[type=checkbox]:checked");let questionIds="";for(const checkbox of $checkboxes)questionIds+=checkbox.getAttribute("name").slice(1)+",";$.post("edit.php",{id:courseModuleId,action:"addquestion",questionids:questionIds},(()=>location.reload()))}))}(courseModuleId)}}}));

//# sourceMappingURL=edit.min.js.map